# 10.函数

函数的定义方式一共有两种：
之前常用的是`函数声明`：
```js
function quack(num) {
  for (var i = 0; i < num; i++) {
    console.log("Quack!");
  }
}
```
quack 可引用和调用函数。  

函数表达式：  
```js
var fly = function(num) {
  for (var i = 0; i < num; i++) {
    console.log("Flying!");
  }
};

fly(3);
```
该表达式的结果是一个值。  
将这个值赋给变量 fly ，然后调用了它，在此它肯定是一个指向函数的引用。  

### 函数声明和函数表达式的区别

它们存在根本性差别  
首先，需要研究浏览器在运行阶段如何处理代码。  

1.  分析网页期间（执行任何代码之前），浏览器查找函数声明。  

遇到变量声明或函数表达式时，会暂时忽略。
```js
var migrating = true;   // 暂被忽略

var fly = function(num) {  // 暂被忽略
  for (var i = 0; i < num; i++) {
    console.log("Flying!");
  }
};

function quack(num) {  // 函数声明，优先处理
  for (var i = 0; i < num; i++) {
    console.log("Quack!");
  }
}

if (migrating) {        // 暂被忽略
  quack(4);
  fly(4);
}

```

找到函数声明时时，浏览器创建相应的函数，将`函数引用`赋给与函数`同名的变量`。比如，会创建一个`名为 quack 的变量`来存储指向这个函数的引用。


2. 浏览器执行代码
  处理所有的函数声明后，浏览器回到代码开头，开始按`从头到尾`的顺序执行代码。  

```js
var migrating = true;   //1. 定义变量，值为 true

var fly = function(num) {  // 2. 定义变量 fly，创建一个指向函数的引用 ，将这个引用赋给变量 fly
  for (var i = 0; i < num; i++) {
    console.log("Quack!");
  }
};

function quack(num) {       // 5. 因为 if 里调用了 quack，传入实参副本后
  for (var i = 0; i < num; i++) {   // 6. 执行函数体
    console.log("Flying!");
  }
}

if (migrating) {           // 3. 执行 if 语句，条件为 true，继续
  quack(4);                // 4. 调用函数 quack ，变量 quack 是函数 quack 的引用, 并将实参 4 的副本传给 num 形参
  fly(4);                  // 6. 调用 fly
}

```

结论：
- 在处理其他代码之前，先处理函数声明
- 函数表达式随其他代码一起被处理
- 函数声明不返回指向函数的引用;而是创建一个与函数同名的变量，并将指向函数的引用赋给它。**
- 函数表达式返回一个引用，该引用指向函数表达式创建的函数
- 可在变量中存储指向函数的引用
- 函数声明是完整的语句，而`函数表达式`只是`语句的一部分`。  
- 对于函数声明和函数表达式创建的函数，用`相同的方式`处理调用它们的语句。

关于 `函数表达式`只是`语句的一部分`：  
在-p433中说到：在（以下）语句的`右边`，是一个函数表达式。

```js
var fly = function(num) {      // 语句的右边，是一个函数表达式。
  for (var i = 0; i < num; i++) {
    console.log("Quack!");
  }
};
```

也就是说，函数表达式的指的是 没有函数名的这部分。

```js
          function(num) {      
  for (var i = 0; i < num; i++) {
    console.log("Quack!");
  }
};
```

### 问答

- 结果为一个值的任何东西都是`表达式`。 `3 + 4` 的结果为 7，`Math.random() * 6`的结果是一个随机数，而`函数表达式`的结果是一个`引用`。 

- 函数声明为何不是表达式？  
`函数声明是一条语句`。可以认为它包含一条`隐藏的赋值`语句，这条语句将函数`引用`赋给一个`变量`。`函数表达式`不自动将函数引用赋给任何变量，你必须`显式`地这样做。 

- 让变量指向一个函数能带来的好处：  
  可以使用它来调用相应的函数：  
  ```js
  myFunctionReference();
  ```
  还可以将函数引用`传递`给函数或从函数`返回`函数引用。


#### 函数声明和函数表达式的区别
1. 使用函数声明时，函数将在执行前创建；而使用函数表达式时，在运行阶段执行代码时创建。
2. 与函数命名相关：使用函数声明时，将创建一个与函数同名的变量，并让它指向函数; 而使用函数表达式时，通常不给函数指定名称。  因此，你要么在代码中将函数赋给一个变量，要么以其他方式使用函数表达式。后面会讲到。  
